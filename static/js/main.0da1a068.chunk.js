(this.webpackJsonpjamming=this.webpackJsonpjamming||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c=n(0),o=n.n(c),r=n(5),i=n.n(r),s=(n(12),n(6)),l=n(1),u=(n(13),n(14),function(e){var t=e.onSearch,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],i=a[1];return o.a.createElement("div",{className:"SearchBar"},o.a.createElement("input",{placeholder:"Enter A song, Album, or Artist",onChange:function(e){i(e.target.value)}}),o.a.createElement("button",{className:"SearchButton",onClick:function(){t(r)}},"SEARCH"))}),m=(n(15),n(16),n(17),function(e){var t=e.isRemoval,n=e.onAdd,a=e.onRemove,c=e.track,r=function(){n(c)},i=function(){a(c)};return o.a.createElement("div",{className:"Track"},o.a.createElement("div",{className:"Track-information"},o.a.createElement("h3",null,c.name),o.a.createElement("p",null,c.artist," | ",c.album)),t?o.a.createElement("button",{className:"Track-action",onClick:i},"-"):o.a.createElement("button",{className:"Track-action",onClick:r},"+"))}),f=function(e){var t=e.tracks,n=e.onAdd,a=e.onRemove,c=e.isRemoval;return o.a.createElement("div",{className:"TrackList"},t.map((function(e){return o.a.createElement(m,{track:e,key:e.id,onAdd:n,onRemove:a,isRemoval:c})})))},h=function(e){var t=e.searchResults,n=e.onAdd;return o.a.createElement("div",{className:"SearchResults"},o.a.createElement("h2",null,"Results"),o.a.createElement(f,{tracks:t,onAdd:n,isRemoval:!1}))},d=(n(18),function(e){var t=e.onNameChange,n=e.playlistName,a=e.playlistTracks,c=e.onRemove,r=e.onSave;return o.a.createElement("div",{className:"Playlist"},o.a.createElement("input",{value:n,onChange:function(e){t(e.target.value)}}),o.a.createElement(f,{tracks:a,onRemove:c,isRemoval:!0}),o.a.createElement("button",{className:"Playlist-save",onClick:r},"SAVE TO SPOTIFY"))}),v={getAccessToken:function(){if(a)return a;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){a=e[1];var n=Number(t[1]);window.setTimeout((function(){return a=""}),1e3*n),window.history.pushState("Access Token",null,"/")}else{var c="https://accounts.spotify.com/authorize?client_id=".concat("0cc84cce66484a93a68952fb88f03487","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://abdallamourad.github.io/Jamming/");window.location=c}},search:function(e){var t=v.getAccessToken();return fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}})):[]}))},savePlaylist:function(e,t){if(e&&t){var n,a=v.getAccessToken(),c={Authorization:"Bearer ".concat(a)};return fetch("https://api.spotify.com/v1/me",{headers:c}).then((function(e){return e.json()})).then((function(a){return n=a.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists"),{headers:c,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var a=e.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists/").concat(a,"/tracks"),{headers:c,method:"POST",body:JSON.stringify({uris:t})})}))}))}}},p=v,E=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),m=i[0],f=i[1],v=Object(c.useState)("New Playlist"),E=Object(l.a)(v,2),k=E[0],y=E[1],b=function(e){y(e)};return o.a.createElement("div",null,o.a.createElement("h1",null,"Ja",o.a.createElement("span",{className:"highlight"},"mmm"),"ing"),o.a.createElement("div",{className:"App"},o.a.createElement(u,{onSearch:function(e){p.search(e).then((function(e){a(e)}))}}),o.a.createElement("div",{className:"App-playlist"},o.a.createElement(h,{searchResults:n,onAdd:function(e){var t=m;t.find((function(t){return t.id===e.id}))||f([].concat(Object(s.a)(t),[e]))}}),o.a.createElement(d,{playlistName:k,playlistTracks:m,onRemove:function(e){var t=t.filter((function(t){return t.id!==e.id}));f(t)},onNameChange:b,onSave:function(){var e=m.map((function(e){return e.uri}));p.savePlaylist(k,e).then((function(){b("New Playlist"),f([])}))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.0da1a068.chunk.js.map